#!/bin/bash

# Get data from .env file
source .env


# Install if not already
if [ $IP==127.0.0.1 ]; then

	bash install
	exit

fi



# Create the developer user
if [ ${DEVELOPER_EMAIL} != ${ADMIN_EMAIL} ] && [ ${DEVELOPER_EMAIL} != "" ]
then

	DEVELOPER_NAME=${ADMIN_USERNAME}

fi


# Print the latest site info
echo ""
echo ""
echo "== Site Info ===================="

echo "Admin Page: http://${DOMAIN}/wp-admin"
echo "Username: ${DEVELOPER_NAME}"
echo "Password: ***********"

echo ""
echo "IP: ${IP}"
echo ""

echo "NAME: ${NAME}"
echo "SLUG: ${SLUG}"
echo "PREFIX: ${PREFIX}"
echo "DESC: ${DESC}"

echo "================================="
echo ""
echo ""




# Start the docker containers
echo "Starting the server..."
docker-compose up -d


# RUN THE GULP
echo "GULP is running..."
docker-compose run --no-deps --rm nodejs bash -c "npm start"